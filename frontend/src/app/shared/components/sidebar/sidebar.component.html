<nav [ngClass]="{'sidebar': true, 'collapsed': collapsed}">
  <div class="sidebar-header">
    <img src="assets/images/logo-elite.png" alt="Logo" class="logo" />
    <button class="collapse-btn" (click)="toggleSidebar()" title="Colapsar/Expandir menú">
      <span class="collapse-icon">{{ collapsed ? '›' : '‹' }}</span>
    </button>
  </div>

  <div class="company-selector-container" [class.collapsed]="collapsed">
    <span class="company-icon">🏢</span>
    <select 
      *ngIf="!collapsed" 
      class="company-selector" 
      (change)="onCompanyChange($event)"
      [value]="selectedCompany"
    >
      <option *ngFor="let company of companies" [value]="company.id">
        {{ company.name }}
      </option>
    </select>
  </div>

  <ul class="sidebar-menu">
    <ng-container *ngFor="let item of menuItems">
      <li
        [title]="getTooltipText(item.label | translate)"
        [class.collapsed]="collapsed"
        [class.has-submenu]="hasSubItems(item)"
        [class.expanded]="item.expanded"
        [class.active]="isActive(item)"
        (click)="onMenuItemClick(item)"
      >
        <div class="menu-item-content">
          <ng-container [ngSwitch]="item.icon">
            <app-truck-icon *ngSwitchCase="'truck'" [size]="'24'" [color]="'#fff'" [stroke]="'#fff'" />
            <app-costs-icon *ngSwitchCase="'costs'" [size]="'24'" [color]="'#fff'" [stroke]="'#fff'" />
            <app-reports-icon *ngSwitchCase="'reports'" [size]="'24'" [color]="'#fff'" [stroke]="'#fff'" />
            <span *ngSwitchCase="'permissions'" class="permissions-icon">🔐</span>
            <span *ngSwitchCase="'ecommerce'" class="ecommerce-icon">🛒</span>
            <span *ngSwitchCase="'groups'" class="groups-icon">👥</span>
          </ng-container>
          <span *ngIf="!collapsed" class="menu-label">{{ item.label | translate }}</span>
        </div>
        <span *ngIf="!collapsed && hasSubItems(item)" class="expand-icon">{{ item.expanded ? '▼' : '▶' }}</span>
      </li>

      <ul
        *ngIf="hasSubItems(item) && item.expanded && !collapsed"
        class="submenu"
      >
        <li
          *ngFor="let subItem of item.subItems"
          [routerLink]="subItem.route"
          routerLinkActive="active"
          class="submenu-item"
        >
          <ng-container [ngSwitch]="subItem.icon">
            <app-truck-icon *ngSwitchCase="'truck'" [size]="'20'" [color]="'#fff'" [stroke]="'#fff'" />
            <app-costs-icon *ngSwitchCase="'costs'" [size]="'20'" [color]="'#fff'" [stroke]="'#fff'" />
            <span *ngSwitchCase="'ecommerce'" class="ecommerce-icon">🛒</span>
            <app-groups-icon *ngSwitchCase="'groups'" [size]="'20'" [stroke]="'#fff'"></app-groups-icon>
          </ng-container>
          <span class="submenu-label">{{ subItem.label | translate }}</span>
        </li>
      </ul>
    </ng-container>
  </ul>
</nav> 